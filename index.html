<!DOCTYPE html>
<html lang="pt-BR">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Sistema de Ficha Técnica de Cozinha</title>
 <link rel="icon" href="./favicon.svg" type="image/svg+xml">
 <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp"></script>
 <script>
 tailwind.config = {
 theme: {
 extend: {
 fontFamily: {
 'sans': ['Inter', 'system-ui', 'sans-serif'],
 }
 }
 }
 }
 </script>
 <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
 <script src="https://unpkg.com/lucide@latest"></script>
 <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
 
 <!-- Firebase SDK -->
 <script type="module">
 import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js';
 import { getFirestore, collection, addDoc, getDocs, doc, updateDoc, deleteDoc, query, orderBy, where, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js';
 import { getAuth, signInAnonymously, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.12.4/firebase-auth.js';
 
 // Configuração do Firebase
 const firebaseConfig = {
 apiKey: "AIzaSyCvjYUQr1xvTskO1ZZqGHKi1d1SysvGWLc",
 authDomain: "cozinha-inteligente-2b040.firebaseapp.com",
 projectId: "cozinha-inteligente-2b040",
 storageBucket: "cozinha-inteligente-2b040.firebasestorage.app",
 messagingSenderId: "350206574229",
 appId: "1:350206574229:web:1e525a795d69e3dbd9259c"
 };
 
 // Inicializar Firebase
 const app = initializeApp(firebaseConfig);
 const firestore = getFirestore(app);
 const firebaseAuth = getAuth(app);
 
 // Tornar disponível globalmente
 window.firebaseServices = { 
 db: firestore, 
 auth: firebaseAuth, 
 collection, 
 addDoc, 
 getDocs, 
 doc, 
 updateDoc, 
 deleteDoc, 
 query, 
 orderBy, 
 where, 
 signInAnonymously, 
 onAuthStateChanged, 
 onSnapshot 
 };
 
 // Disparar evento quando Firebase estiver pronto
 window.dispatchEvent(new CustomEvent('firebaseReady'));
 </script>
 
 <style>
 body { font-family: 'Inter', sans-serif; }
 .view { display: none; }
 .view.active { display: block; }
 .sidebar-link.active { background-color: #FFFBEB; color: #D97706; border-right: 3px solid #F97316; }
 @media print {
 body * { visibility: hidden; }
 #printableArea, #printableArea * { visibility: visible; }
 #printableArea { position: absolute; left: 0; top: 0; width: 100%; }
 }
 .loading-overlay {
 position: fixed;
 top: 0;
 left: 0;
 right: 0;
 bottom: 0;
 background: rgba(0, 0, 0, 0.5);
 z-index: 9999;
 display: none;
 align-items: center;
 justify-content: center;
 }
 .github-corner:hover .octo-arm {
 animation: octocat-wave 560ms ease-in-out;
 }
 @keyframes octocat-wave {
 0%,20%,60%,100% { transform:rotate(0); }
 40%,80% { transform:rotate(-25deg); }
 }
 @media (max-width:500px) {
 .github-corner:hover .octo-arm { animation:none; }
 .github-corner .octo-arm { animation:octocat-wave 560ms ease-in-out; }
 }
 </style>
</head>
<body class="bg-gray-50 text-gray-800">

 <!-- GitHub Corner -->
 <a href="https://github.com/Allanmths/CozinhaInteligente" class="github-corner" aria-label="View source on GitHub" target="_blank">
 <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#64748b; color:#fff; position: absolute; top: 0; border: 0; right: 0; z-index: 1000;" aria-hidden="true">
 <path d="m0,0 0,250 250,0 z"></path>
 <path d="m127.5,110c-50,0 -87.5,37.5 -87.5,87.5 0,37.5 25,70 60,82.5 v-30c-5,0 -10,-2.5 -12.5,-7.5 -2.5,-5 -5,-12.5 -10,-15 -2.5,-2.5 -2.5,-2.5 0,-2.5 5,0 10,7.5 12.5,12.5 5,7.5 12.5,10 20,10 7.5,0 15,-2.5 17.5,-7.5 2.5,-12.5 10,-20 17.5,-20 -35,-2.5 -55,-20 -55,-45 0,-10 2.5,-20 10,-27.5 -2.5,-7.5 -2.5,-17.5 0,-25 0,0 10,0 25,10 7.5,-2.5 15,-2.5 22.5,-2.5s15,0 22.5,2.5c15,-10 25,-10 25,-10 2.5,7.5 2.5,17.5 0,25 7.5,7.5 10,17.5 10,27.5 0,25 -20,42.5 -55,45 12.5,2.5 20,15 20,30v40c35,-12.5 60,-45 60,-82.5 0,-50 -37.5,-87.5 -87.5,-87.5z" style="fill:currentColor"></path>
 </svg>
 </a>

 <!-- Loading Indicator -->
 <div id="loadingIndicator" class="loading-overlay">
 <div class="bg-white p-6 rounded-lg shadow-lg flex items-center space-x-3">
 <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"></div>
 <span class="text-gray-800">Carregando dados...</span>
 </div>
 </div>

 <!-- Firebase Status -->
 <div id="firebaseStatus" class="fixed top-4 right-4 z-50 hidden">
 <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded flex items-center">
 <i data-lucide="wifi" class="h-4 w-4 mr-2"></i>
 <span>Conectado ao Firebase</span>
 </div>
 </div>

 <!-- Header Banner -->
 <div class="bg-gradient-to-r from-orange-500 to-red-500 text-white py-3 px-6 text-center">
 <div class="flex items-center justify-center space-x-2">
 <i data-lucide="rocket" class="h-5 w-5"></i>
 <span class="font-semibold">Sistema hospedado no GitHub Pages com Firebase</span>
 <i data-lucide="cloud" class="h-5 w-5"></i>
 </div>
 </div>

 <div class="flex min-h-screen">
 <!-- Sidebar -->
 <aside class="w-64 bg-white shadow-md flex-shrink-0 flex flex-col">
 <div class="p-6 flex items-center space-x-3 border-b border-gray-200">
 <i data-lucide="chef-hat" class="h-10 w-10 text-orange-500"></i>
 <div>
 <h1 class="text-xl font-bold text-gray-800">Cozinha Inteligente</h1>
 <p class="text-xs text-gray-500">v2.0 Firebase Edition</p>
 </div>
 </div>
 <nav class="mt-6 flex-grow">
 <a href="#" onclick="showView('dashboard')" class="sidebar-link active flex items-center px-6 py-3 text-gray-600 hover:bg-gray-100">
 <i data-lucide="layout-dashboard" class="h-5 w-5 mr-3"></i><span>Dashboard</span>
 </a>
 <a href="#" onclick="showView('relatorios')" class="sidebar-link flex items-center px-6 py-3 text-gray-600 hover:bg-gray-100">
 <i data-lucide="line-chart" class="h-5 w-5 mr-3"></i><span>Relatórios</span>
 </a>
 <a href="#" onclick="showView('pratos')" class="sidebar-link flex items-center px-6 py-3 text-gray-600 hover:bg-gray-100">
 <i data-lucide="utensils-crossed" class="h-5 w-5 mr-3"></i><span>Pratos</span>
 </a>
 <a href="#" onclick="showView('fichas')" class="sidebar-link flex items-center px-6 py-3 text-gray-600 hover:bg-gray-100">
 <i data-lucide="notebook-tabs" class="h-5 w-5 mr-3"></i><span>Fichas Técnicas</span>
 </a>
 <a href="#" onclick="showView('insumos')" class="sidebar-link flex items-center px-6 py-3 text-gray-600 hover:bg-gray-100">
 <i data-lucide="carrot" class="h-5 w-5 mr-3"></i><span>Insumos</span>
 </a>
 <a href="#" onclick="showView('importacao')" class="sidebar-link flex items-center px-6 py-3 text-gray-600 hover:bg-gray-100">
 <i data-lucide="file-up" class="h-5 w-5 mr-3"></i><span>Importação</span>
 </a>
 </nav>
 <div class="p-6 border-t border-gray-200">
 <a href="#" onclick="showView('configuracoes')" class="sidebar-link flex items-center px-6 py-3 text-gray-600 hover:bg-gray-100">
 <i data-lucide="cog" class="h-5 w-5 mr-3"></i><span>Configurações</span>
 </a>
 <div class="mt-4 p-3 bg-gray-100 rounded-lg text-center">
 <div class="flex items-center justify-center space-x-2 text-sm text-gray-600">
 <i data-lucide="database" class="h-4 w-4"></i>
 <span>Firebase</span>
 </div>
 <div id="connectionStatus" class="text-xs mt-1 text-green-600">Conectado</div>
 </div>
 </div>
 </aside>

 <!-- Main Content -->
 <main class="flex-grow p-4 sm:p-6 lg:p-8 bg-gray-100 

 <!-- Dashboard View -->
 <div id="dashboard" class="view active">
 <div class="flex items-center justify-between mb-6">
 <h2 class="text-3xl font-bold text-gray-900">Dashboard de Análises</h2>
 <div class="flex items-center space-x-2 bg-green-100 border border-green-400 px-3 py-2 rounded-lg">
 <i data-lucide="globe" class="h-4 w-4 text-green-700"></i>
 <span class="text-sm font-medium text-green-700">GitHub Pages</span>
 </div>
 </div>
 
 <!-- Stats Cards -->
 <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
 <div class="bg-white p-6 rounded-lg shadow-md">
 <div class="flex items-center">
 <div class="p-3 rounded-full bg-blue-100">
 <i data-lucide="package" class="h-6 w-6 text-blue-600"></i>
 </div>
 <div class="ml-4">
 <p class="text-sm font-medium text-gray-600">Total de Insumos</p>
 <p id="totalInsumos" class="text-2xl font-bold text-gray-900">0</p>
 </div>
 </div>
 </div>
 
 <div class="bg-white p-6 rounded-lg shadow-md">
 <div class="flex items-center">
 <div class="p-3 rounded-full bg-green-100">
 <i data-lucide="notebook-tabs" class="h-6 w-6 text-green-600"></i>
 </div>
 <div class="ml-4">
 <p class="text-sm font-medium text-gray-600">Fichas Técnicas</p>
 <p id="totalFichas" class="text-2xl font-bold text-gray-900">0</p>
 </div>
 </div>
 </div>
 
 <div class="bg-white p-6 rounded-lg shadow-md">
 <div class="flex items-center">
 <div class="p-3 rounded-full bg-purple-100">
 <i data-lucide="utensils-crossed" class="h-6 w-6 text-purple-600"></i>
 </div>
 <div class="ml-4">
 <p class="text-sm font-medium text-gray-600">Total de Pratos</p>
 <p id="totalPratos" class="text-2xl font-bold text-gray-900">0</p>
 </div>
 </div>
 </div>
 
 <div class="bg-white p-6 rounded-lg shadow-md">
 <div class="flex items-center">
 <div class="p-3 rounded-full bg-orange-100">
 <i data-lucide="shopping-cart" class="h-6 w-6 text-orange-600"></i>
 </div>
 <div class="ml-4">
 <p class="text-sm font-medium text-gray-600">Total de Compras</p>
 <p id="totalCompras" class="text-2xl font-bold text-gray-900">0</p>
 </div>
 </div>
 </div>
 </div>

 <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
 <div class="bg-white p-6 rounded-lg shadow-md">
 <h3 class="text-xl font-semibold mb-4 flex items-center text-gray-800 
 <i data-lucide="trending-up" class="h-6 w-6 mr-3 text-orange-500"></i>Fichas com Maiores Variações
 </h3>
 <div class="relative h-80">
 <canvas id="dashboardFichasChart"></canvas>
 </div>
 </div>
 <div class="bg-white p-6 rounded-lg shadow-md">
 <h3 class="text-xl font-semibold mb-4 flex items-center text-gray-800 
 <i data-lucide="bar-chart-3" class="h-6 w-6 mr-3 text-orange-500"></i>Insumos com Maiores Variações
 </h3>
 <div class="relative h-80">
 <canvas id="dashboardInsumosChart"></canvas>
 </div>
 </div>
 </div>
 </div>
 
 <!-- Outras views continuam iguais... -->
 <div id="insumos" class="view">
 <h2 class="text-3xl font-bold mb-6 text-gray-900 de Insumos</h2>
 <div class="bg-white p-6 rounded-lg shadow-md">
 <div class="flex flex-col sm:flex-row justify-between items-center mb-4 gap-4">
 <h3 class="text-xl font-semibold text-gray-800 de Insumos</h3>
 <div class="flex items-center gap-2 flex-wrap">
 <button onclick="exportarInsumosCSV()" class="bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-700 flex items-center shadow-sm transition-colors text-sm">
 <i data-lucide="download" class="h-4 w-4 mr-2"></i>Exportar CSV
 </button>
 <select id="filterFornecedor" onchange="renderInsumos()" class="border border-gray-300 rounded-lg py-2 px-3 text-sm focus:ring-orange-500 focus:border-orange-500">
 <option value="">Todos os Fornecedores</option>
 </select>
 <select id="filterUnidade" onchange="renderInsumos()" class="border border-gray-300 rounded-lg py-2 px-3 text-sm focus:ring-orange-500 focus:border-orange-500">
 <option value="">Todas as Unidades</option>
 </select>
 <div class="relative">
 <input type="text" id="searchInput" onkeyup="renderInsumos()" placeholder="Buscar insumo..." class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg w-full sm:w-64 focus:ring-orange-500 focus:border-orange-500">
 <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"></i>
 </div>
 </div>
 </div>
 <div class="overflow-x-auto">
 <table class="w-full text-left">
 <thead class="bg-gray-100 
 <tr>
 <th class="p-4 font-semibold text-gray-600 do Insumo</th>
 <th class="p-4 font-semibold text-gray-600 Padrão</th>
 <th class="p-4 font-semibold text-gray-600 Fornecedor</th>
 <th class="p-4 font-semibold text-gray-600 Preço</th>
 <th class="p-4 font-semibold text-gray-600 da Compra</th>
 <th class="p-4 font-semibold text-gray-600 
 </tr>
 </thead>
 <tbody id="insumosTableBody"></tbody>
 </table>
 </div>
 </div>
 </div>

 <!-- Views placeholder para outras seções -->
 <div id="relatorios" class="view">
 <h2 class="text-3xl font-bold mb-6 text-gray-900 Gerenciais</h2>
 <div class="bg-white p-8 rounded-lg shadow-md text-center">
 <i data-lucide="chart-pie" class="h-16 w-16 mx-auto text-gray-400 mb-4"></i>
 <h3 class="text-xl font-semibold text-gray-600 mb-2">Relatórios em Desenvolvimento</h3>
 <p class="text-gray-500 funcionalidade será implementada em breve.</p>
 </div>
 </div>

 <div id="pratos" class="view">
 <h2 class="text-3xl font-bold mb-6 text-gray-900 Finais</h2>
 <div class="bg-white p-8 rounded-lg shadow-md text-center">
 <i data-lucide="utensils-crossed" class="h-16 w-16 mx-auto text-gray-400 mb-4"></i>
 <h3 class="text-xl font-semibold text-gray-600 mb-2">Gestão de Pratos em Desenvolvimento</h3>
 <p class="text-gray-500 funcionalidade será implementada em breve.</p>
 </div>
 </div>

 <div id="fichas" class="view">
 <h2 class="text-3xl font-bold mb-6 text-gray-900 Técnicas</h2>
 <div class="bg-white p-8 rounded-lg shadow-md text-center">
 <i data-lucide="notebook-tabs" class="h-16 w-16 mx-auto text-gray-400 mb-4"></i>
 <h3 class="text-xl font-semibold text-gray-600 mb-2">Fichas Técnicas em Desenvolvimento</h3>
 <p class="text-gray-500 funcionalidade será implementada em breve.</p>
 </div>
 </div>

 <div id="importacao" class="view">
 <h2 class="text-3xl font-bold mb-6 text-gray-900 XML</h2>
 <div class="bg-white p-8 rounded-lg shadow-md text-center">
 <i data-lucide="file-up" class="h-16 w-16 mx-auto text-gray-400 mb-4"></i>
 <h3 class="text-xl font-semibold text-gray-600 mb-2">Importação XML em Desenvolvimento</h3>
 <p class="text-gray-500 funcionalidade será implementada em breve.</p>
 </div>
 </div>

 <div id="configuracoes" class="view">
 <h2 class="text-3xl font-bold mb-6 text-gray-900 
 <div class="bg-white p-6 rounded-lg shadow-md max-w-lg mx-auto">
 <div class="space-y-6">
 <div>
 <h3 class="text-lg font-medium text-gray-900 Padrão</h3>
 <div class="mt-4 space-y-4">
 <div>
 <label for="defaultTaxaPerca" class="block text-sm font-medium text-gray-700 de Perca Padrão (%)</label>
 <input type="number" id="defaultTaxaPerca" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-orange-500 focus:border-orange-500">
 </div>
 <div>
 <label for="defaultCustoFinalizacao" class="block text-sm font-medium text-gray-700 de Finalização Padrão (%)</label>
 <input type="number" id="defaultCustoFinalizacao" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-orange-500 focus:border-orange-500">
 </div>
 <div>
 <label for="defaultMargemLucro" class="block text-sm font-medium text-gray-700 de Lucro Padrão (%)</label>
 <input type="number" id="defaultMargemLucro" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-orange-500 focus:border-orange-500">
 </div>
 </div>
 </div>
 </div>
 <div class="mt-8 text-right">
 <button onclick="salvarConfiguracoes()" class="bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 flex items-center shadow-sm transition-colors inline-flex">
 <i data-lucide="save" class="h-5 w-5 mr-2"></i>Salvar Configurações
 </button>
 </div>
 </div>
 </div>
 </main>
 </div>

 <!-- Print Area -->
 <div id="printableArea" style="display: none;"></div>

 <!-- Include the main JavaScript here -->
 <script src="js/main.js"></script>
</body>
</html>
